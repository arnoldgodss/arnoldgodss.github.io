(()=>{class CollapsibleButton extends HTMLElement{constructor(){super(),this.THROTTLE_INTERVAL=100,this.bottomGapHeight=15,this.contentBlockheight=()=>this.nextElementSibling.querySelector(".content").offsetHeight+this.bottomGapHeight+"px"}connectedCallback(){this.init()}init(){window.wetheme.webcomponentRegistry.register({key:"collapsible-button"}),this.collapsibleContent=this.parentElement.querySelector(".collapsible-content"),this.nextElementSibling.classList.contains("collapsible-content")&&this.parentElement.classList.contains("collapsible-tab")&&(this.parentElement.classList.contains("open")?this.nextElementSibling.style.height="fit-content":this.nextElementSibling.style.height="0px",this.addEventListener("click",this.toggle),this.addEventListener("keydown",e=>{e.key==="Enter"&&this.toggle()}),window.addEventListener("resize",this.handleResize.bind(this)),this.nextElementSibling.addEventListener("click",this.resetHeight.bind(this)),document.addEventListener("shopify:block:select",event=>{this.parentElement.dataset.openByDefault!=="true"&&(this.blockId=this.dataset.blockId,this.blockId&&event.detail.blockId===this.blockId&&this.showDetails())}),document.addEventListener("shopify:block:deselect",()=>{this.parentElement.dataset.openByDefault!=="true"&&this.hideDetails()}))}handleResize(){this.throttle(this.resetHeight,this.THROTTLE_INTERVAL)}resetHeight(){this.parentElement.classList.contains("open")&&this.setTransitionHeight(this.nextElementSibling,!1)}toggle(){this.parentElement.classList.contains("open")?this.hideDetails():this.showDetails()}showDetails(){this.setTransitionHeight(this.nextElementSibling,!1),this.parentElement.classList.add("open"),this.collapsibleContent&&this.collapsibleContent.addEventListener("transitionend",this.transitionEndHandler.bind(this),{once:!0})}hideDetails(){this.setTransitionHeight(this.nextElementSibling,!0),this.parentElement.classList.remove("open"),this.collapsibleContent&&(this.collapsibleContent.style.overflow="hidden")}setTransitionHeight(container,isOpen){isOpen?container.style.height="0px":container.style.height=this.contentBlockheight()}transitionEndHandler(event){event.propertyName==="height"&&(this.collapsibleContent.style.overflow="visible")}throttle(callback,time){this.throttleTimer||(this.throttleTimer=!0,setTimeout(()=>{callback.call(this),this.throttleTimer=!1},time))}}customElements.get("collapsible-button")||customElements.define("collapsible-button",CollapsibleButton)})();
//# sourceMappingURL=/cdn/shop/t/18/assets/component-collapsible-button.js.map?v=6756485005953681051758233383
